(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{316:function(t,e,n){var content=n(325);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(56).default)("951e9154",content,!0,{sourceMap:!1})},317:function(t,e,n){var content=n(327);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(56).default)("6a3a956b",content,!0,{sourceMap:!1})},318:function(t,e,n){var content=n(329);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(56).default)("4e6fce9d",content,!0,{sourceMap:!1})},319:function(t,e,n){var content=n(337);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(56).default)("6944bb68",content,!0,{sourceMap:!1})},320:function(t,e,n){var content=n(339);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(56).default)("36873827",content,!0,{sourceMap:!1})},324:function(t,e,n){"use strict";var r=n(316);n.n(r).a},325:function(t,e,n){(t.exports=n(55)(!1)).push([t.i,".trigger[data-v-2c0b19be]{width:30px;height:30px;border:1px solid #000;border-radius:50%;margin:0 5px;transition:all .2s}.active[data-v-2c0b19be]{background-color:#000}",""])},326:function(t,e,n){"use strict";var r=n(317);n.n(r).a},327:function(t,e,n){(t.exports=n(55)(!1)).push([t.i,".triggers[data-v-3f7405b4]{margin:10px auto 0}.trigger[data-v-3f7405b4],.triggers[data-v-3f7405b4]{display:inline-block}",""])},328:function(t,e,n){"use strict";var r=n(318);n.n(r).a},329:function(t,e,n){(t.exports=n(55)(!1)).push([t.i,".mapping[data-v-5a9cdd85]{border:0 auto}.map[data-v-5a9cdd85],.mapping[data-v-5a9cdd85]{display:inline-block}.map[data-v-5a9cdd85]{margin:0 10px}",""])},336:function(t,e,n){"use strict";var r=n(319);n.n(r).a},337:function(t,e,n){(t.exports=n(55)(!1)).push([t.i,'.stage[data-v-20692582]{position:relative;height:200px;background:#000}.stage[data-v-20692582]:after{content:"";display:block;width:100%;height:1px;bottom:30px}.stage[data-v-20692582]:after,.track[data-v-20692582]{background-color:#fff;position:absolute;left:0}.track[data-v-20692582]{top:-30px;width:30px;height:30px;border-radius:50%;transform:translateY(0);transition:transform 2s linear;-webkit-animation-duration:2s;animation-duration:2s;-webkit-animation-name:down-data-v-20692582;animation-name:down-data-v-20692582;-webkit-animation-timing-function:linear;animation-timing-function:linear}@-webkit-keyframes down-data-v-20692582{0%{transform:translateY(0)}to{transform:translateY(185px)}}@keyframes down-data-v-20692582{0%{transform:translateY(0)}to{transform:translateY(185px)}}.track-1[data-v-20692582]{left:0}.track-2[data-v-20692582]{left:40px}.track-3[data-v-20692582]{left:80px}.track-4[data-v-20692582]{left:120px}.track-5[data-v-20692582]{left:160px}.track-6[data-v-20692582]{left:200px}.track-7[data-v-20692582]{left:240px}.track-8[data-v-20692582]{left:280px}',""])},338:function(t,e,n){"use strict";var r=n(320);n.n(r).a},339:function(t,e,n){(t.exports=n(55)(!1)).push([t.i,".container{margin:0 auto;min-height:100vh;display:flex;justify-content:center;align-items:center;text-align:center}.title{font-family:Quicksand,Source Sans Pro,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;display:block;font-weight:300;font-size:100px;color:#35495e;letter-spacing:1px}.subtitle{font-weight:300;font-size:42px;color:#526488;word-spacing:5px;padding-bottom:15px}",""])},342:function(t,e,n){"use strict";n.r(e);n(82),n(22),n(16),n(14),n(43);var r=n(34),o=n(83),c={props:{triggered:Boolean,color:String},data:function(){return{active:!1,activeTimeout:null}},watch:{triggered:function(t){var e=this;t&&(this.activeTimeout&&clearTimeout(this.activeTimeout),this.active=!0,this.activeTimeout=setTimeout(function(){e.active=!1},100))}}},l=(n(324),n(32));function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,n)}return e}var f={data:function(){return{color:{1:"#ff0000",2:"#00ff00",3:"#0000ff",4:"#ff00ff",5:"#00ffff",6:"#ffff00",7:"#f00f0f",8:"#0f00f0",9:"#fff000"}}},components:{midhTrigger:Object(l.a)(c,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"trigger",class:{active:this.active},style:{borderColor:this.color}})},[],!1,null,"2c0b19be",null).exports},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(source,!0).forEach(function(e){Object(r.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}({},Object(o.c)({liveInput:function(t){return t.controls.liveInput}}))},h=(n(326),Object(l.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Inputs:")]),t._v(" "),n("div",{staticClass:"triggers"},t._l(9,function(i){return n("midhTrigger",{key:i,attrs:{triggered:t.liveInput&&t.liveInput.note==="m"+i,color:t.color[i]}})}),1)])},[],!1,null,"3f7405b4",null).exports);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,n)}return e}function v(map){return{get:function(){return this.mapping[map]},set:function(t){this.$store.dispatch("controls/setMap",{map:map,value:t})}}}var y={data:function(){return{editing:!1,currentMapIndex:0,maps:["m1","m2","m3","m4","m5","m6","m7","m8","m9"]}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(source,!0).forEach(function(e){Object(r.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}({},function(){for(var t={},i=1;i<=9;i++){var map="m"+i;t[map]=v(map)}return t}(),{},Object(o.c)({inputs:function(t){return t.controls.inputs},mapping:function(t){return t.controls.mapping},mappingCompleted:function(t){return t.controls.mappingCompleted}}),{currentMap:{get:function(){return this.maps[this.currentMapIndex]},set:function(t){this.$store.dispatch("controls/setMap",{map:this.currentMap,value:t})}}}),methods:{startEdition:function(){this.editing=!0,this.$store.dispatch("controls/mappingEditing")}},watch:{inputs:function(t){this.editing&&(this.currentMap=t[t.length-1],this.currentMapIndex<this.maps.length-1?this.currentMapIndex++:(this.editing=!1,this.currentMapIndex=0,this.$store.dispatch("controls/mappingCompleted")))}}},k=(n(328),Object(l.a)(y,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Mapping:")]),t._v(" "),t.editing?t._e():n("div",[n("button",{staticClass:"button",on:{click:t.startEdition}},[t._v("Set mapping")]),t._v(" "),n("br"),t._v(" "),t.mappingCompleted?n("div",{staticClass:"mapping"},t._l(t.mapping,function(e,map){return n("p",{key:map,staticClass:"map"},[n("strong",[t._v(t._s(map)+" :")]),t._v("\n                "+t._s(e)+"\n            ")])}),0):t._e()]),t._v(" "),t.editing?n("div",[n("h1",[t._v(t._s(t.maps[t.currentMapIndex]))]),t._v(" "),n("p",[t._v("Tap on an input to assign")])]):t._e()])},[],!1,null,"5a9cdd85",null).exports),w=(n(330),n(87),n(334)),O=n(340);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,n)}return e}function x(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(source,!0).forEach(function(e){Object(r.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}var j={props:["name"],data:function(){return{quality:"",qualityTimeout:null,score:0,log:[],showLog:!1,activeTracks:[],scene:null,camera:null,renderer:null,notes:[],animating:!1,speed:6e3,distance:100,musicDataArray:null,musicSampleSize:10,background:null,bgPlanes:[],trackPlanes:[],tracksColors:[16711680,65280,255,16711935,65535,16776960,15732495,983280,16773120]}},computed:x({},Object(o.c)({time:function(t){return t.track.time},liveInput:function(t){return t.controls.liveInput},track:function(t){return t.track.track},playing:function(t){return t.track.playing},analyzer:function(t){return t.track.analyzer}}),{},Object(o.b)({loaded:"track/loaded"}),{logjson:function(){return JSON.stringify(this.log)},domElement:function(){return this.renderer?this.renderer.domElement:null}}),watch:{time:function(t){var e=this;this.track.filter(function(n){return n.t<=t+e.speed&&!n.displayed}).forEach(function(element){element.displayed=!0,e.addNoteToScene(element),e.activeTracks.push(x({},element,{id:element.i+"-"+t}))})},liveInput:function(input){var t=this;if(input){var e=parseInt(input.note.replace("m",""));if(this.log.push({t:input.time,i:e}),e<=this.trackPlanes.length&&O.a.to(this.trackPlanes[e-1].material,.2,{opacity:.5,onComplete:function(){O.a.to(t.trackPlanes[e-1].material,.2,{opacity:0})}}),this.track&&this.track.length>0){var n=this.track.map(function(t,e){return x({},t,{diff:Math.abs(t.t-input.time),index:e})}).filter(function(e){return!e.checked&&"m"+e.i===input.note&&e.diff<t.$store.state.track.treshold});if(n.length>0){var r=n.reduce(function(t,e){return e.diff<t.diff?t:e});this.checkTrackElement(r.index),this.addScore(r.diff)}}}}},mounted:function(){this.scene=new w.h,this.camera=new w.f(45,window.innerWidth/600,.1,this.distance+15),this.camera.lookAt(0,0,-5),this.camera.position.y=4,this.camera.position.z=12,this.renderer=new w.i({antialias:!0}),this.$refs.threeContainer.appendChild(this.renderer.domElement),this.renderer.setSize(window.innerWidth,600);for(var t=new w.g(200/this.musicSampleSize,200),e=new w.b(4817822),n=new w.e({color:e,opacity:0,transparent:!0}),r=0;r<this.musicSampleSize;r++){var o=new w.d(t,n.clone());o.position.z=-this.distance,o.position.x=r*(200/this.musicSampleSize)-200/this.musicSampleSize*this.musicSampleSize/2,this.bgPlanes.push(o),this.scene.add(o)}var c=new w.c(.05,.05,50),l=new w.e({color:11184810}),d=new w.d(c,l);d.rotation.z=Math.PI/2,this.scene.add(d);for(var f=new w.c(.05,.05,this.distance),h=new w.e({color:11184810}),m=new w.g(2,this.distance),v=new w.b(6710886),y=new w.e({color:v,opacity:0,transparent:!0}),k=-10;k<10;k+=2){var line=new w.d(f,h);if(line.rotation.x=Math.PI/2,line.position.x=k+1,line.position.z=-this.distance/2,this.scene.add(line),k<8){var O=new w.d(m,y.clone());O.material.color=new w.b(this.tracksColors[k/2+5]),O.rotation.x=-Math.PI/2,O.position.x=k+2,O.position.z=-this.distance/2,this.trackPlanes.push(O),this.scene.add(O)}}this.animating=!0,this.animate()},destroyed:function(){var t=this;this.animating=!1,this.qualityTimeout&&clearTimeout(this.qualityTimeout),this.notes.forEach(function(e){t.scene.remove(e),e.geometry.dispose(),e.material.dispose()}),this.notes=[]},methods:{play:function(){this.$store.dispatch("track/play"),this.musicDataArray=new Uint8Array(this.musicSampleSize)},stop:function(){this.$store.dispatch("track/stop")},addScore:function(t){var e=this;this.score+=this.$store.state.track.treshold-t,this.qualityTimeout&&clearTimeout(this.qualityTimeout),t<this.$store.state.track.treshold/3?this.quality="Perfect":t<this.$store.state.track.treshold/2?this.quality="Excellent":this.quality="Good",this.qualityTimeout=setTimeout(function(){e.quality=""},500)},checkTrackElement:function(t){var e=this;this.track[t].checked=!0;var n=x({},this.notes[t].scale,{opacity:1});this.notes[t].checked=!0,O.a.to(n,.1,{x:1.2,y:1.2,z:1.2,onUpdate:function(){e.notes[t].geometry.scale(n.x,n.y,n.z),e.notes[t].geometry.opacity=n.opacity},onComplete:function(){e.scene.remove(e.notes[t])}})},addNoteToScene:function(t){var i=t.i,e=t.t,n=new w.a(.5,.5,.5),r=new w.e({color:this.tracksColors[i-1],opacity:1,transparent:!0}),o=new w.d(n,r);o.position.z=-this.distance,o.position.x=2*(i-1)-8,o.time=e,this.notes.push(o),this.scene.add(o)},animate:function(){var t=this;this.animating&&requestAnimationFrame(this.animate),this.musicDataArray&&(this.analyzer.getByteFrequencyData(this.musicDataArray),this.musicDataArray.forEach(function(e,n){t.bgPlanes[n].material.opacity=e/255})),this.notes.forEach(function(e){e.checked||(e.position.z=(t.time-e.time)*t.distance/t.speed)}),this.renderer.render(this.scene,this.camera)}}},track=(n(336),Object(l.a)(j,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Track:")]),t._v(" "),t.loaded?n("div",[t.playing?t._e():n("button",{on:{click:t.play}},[t._v("Start")]),t._v(" "),t.playing?n("button",{on:{click:t.stop}},[t._v("Stop")]):t._e(),t._v(" "),n("p",[t._v("Score: "+t._s(t.score))]),t._v(" "),n("p",[t._v("Quality: "+t._s(t.quality))])]):t._e(),t._v(" "),n("div",{ref:"threeContainer"}),t._v(" "),t.loaded?t._e():n("div",[t._v("Loading...")]),t._v(" "),n("button",{on:{click:function(e){t.showLog=!t.showLog}}},[t._v("Toggle log")]),t._v(" "),t.showLog?n("div",[n("code",[t._v(t._s(t.logjson))])]):t._e()])},[],!1,null,"20692582",null).exports),P={},S=Object(l.a)(P,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Tracklist:")]),t._v(" "),n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.$store.dispatch("main/setCurrentTrack","bensound-summer")}}},[n("el-card",[t._v("bensound-summer")])],1)])},[],!1,null,null,null).exports;function T(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,n)}return e}var E={computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(source,!0).forEach(function(e){Object(r.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):T(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}({},Object(o.c)({mappingCompleted:function(t){return t.controls.mappingCompleted},currentTrack:function(t){return t.main.currentTrack}})),components:{midhInputs:h,midhMapping:k,midhTrack:track,midhTracklist:S}},C=(n(338),Object(l.a)(E,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",[n("h1",{staticClass:"title"},[t._v("midnight-hero")]),t._v(" "),n("h2",{staticClass:"subtitle"},[t._v("A rythm game to play with MIDI devices")]),t._v(" "),n("midhMapping"),t._v(" "),t.mappingCompleted?[n("midhInputs"),t._v(" "),t.currentTrack?t._e():n("midhTracklist"),t._v(" "),t.currentTrack?n("midhTrack",{attrs:{name:t.currentTrack}}):t._e()]:t._e()],2)])},[],!1,null,null,null));e.default=C.exports}}]);